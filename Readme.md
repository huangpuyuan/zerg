ThinkPHP 5.0
===============

[![Total Downloads](https://poser.pugx.org/topthink/think/downloads)](https://packagist.org/packages/topthink/think)
[![Latest Stable Version](https://poser.pugx.org/topthink/think/v/stable)](https://packagist.org/packages/topthink/think)
[![Latest Unstable Version](https://poser.pugx.org/topthink/think/v/unstable)](https://packagist.org/packages/topthink/think)
[![License](https://poser.pugx.org/topthink/think/license)](https://packagist.org/packages/topthink/think)

详细开发文档参考 [ThinkPHP5完全开发手册](http://www.kancloud.cn/manual/thinkphp5)

> #### 参数获取的几种方式

* 变量的自动对应
* 依赖注入
	* request库
* 助手函数
	* input

# 产品鸟瞰
#### 产品功能讲解分析
* 首页
	* 轮播图
		* 3张 点击跳转至详情页或支持其他
	* 专题
		* 一组商品的集合
		* 专题1
		* 专题2
		* 专题3
		* 点击后跳转至商品专题页面
			* 一张头图
			* 商品列表
	* 下拉刷新
* 分类
	* 左侧一级分类
		* 该目录所有商品 点击进入商品详情页
		* 分类切换（分类切换务必不要每次加载服务器数据）
	* 
* 商品详情
	* ...
	* 选择数量的插件
	* 加入购物车添加一个动画效果
	* 
* 购物车
	* 利用缓存 暂不和服务器通讯 websocket
	* 商品数量
	* 删除商品
	* 支付后自动删除购物车商品
* 我的
    * 微信信息
    * 地址管理
        * 进入修改页面
        * 三级列表联动
    * 我的订单
        * 点击订单后进入到订单详情
    * 订单分类
        * 代付款
        * 已付款
        * 已发货
 * 下单页面
    * 展示购买商品金额
    * 可修改收货地址
    * 点击支付拉起微信支付
 * 支付结果页
 * 用户登入与令牌
 
 #### Banner数据表设计分析
 #### 接口参数校验
 
 #### 用微信服务器的交互
 #### 业务层的分层
 * 保证层与层的松耦合 堆叠和嵌套(设计模式学会和运用：可变形态的软件)
 * Model & Service
 * 粒度 
 * 统一的异常处理机制AOP机制 中小型项目（先理解清楚）
 * 再向分布式高并发系统进阶
 
 #### token令牌的使用
 * 参数验证（Validate）
 * 列表信息 商品信息 不需要token
 * 凡涉及到用户的信息 都需要用token令牌进行保护
 
 #### 什么是REST
> Representational State Transfer 表述性状态转移
* 一种风格、一种约束、设计理念
* SOAP (Simple Object Acees Protocl) 通常使用XML描述数据 
* @RESTful API：
    * 轻 | JSON描述 | 基于资源(增删改查都只是对于资源状态的改变) | 使用HTTP动词来操作资源
* @HTTP动词 (幂等性、资源安全性)
    * POST 创建
    * PUT 更新
    * GET 查询
    * DELETE 删除
* @状态码
    * 404(资源没找到) 400(参数错误) 401(未授权) 403(当前资源被禁止)
    * 200(get查询请求执行成功) 201(post创建请求执行成功)
   202(put更新执行成功)“有时put也可以写成201，与http状态码不一样”   
    * 500(服务器未知错误 *bug *服务器)
* @错误码
 * 自定义的错误ID号
 * 统一描述错误：错误码、错误信息、当前URL
* @使用Token令牌来授权和验证身份
* @版本控制
    * v1
    * v2
* @测试与生产环境分开
    * api.xxx.com
    * dev.api.xxx.com
* 标准的API文档
* 优秀的开放API
    * 豆瓣开放API
    * Github开放API（非常标准）
* 合理使用 切勿盲目照搬标准的REST


#### 全局异常处理

* 异常层次级别
    * 方法1、方法2、方法3、全局异常处理
* 处理流程
    * 异常捕获
    * 处理异常（记录日志，修复异常返回客户端调用）
    * 抛出异常
* 异常处理分类
    1. 由于用户行为导致的异常 
        * 通常不需要记录日志
        * 需要向用户返回具体信息
    2. 服务器自身的异常(代码错误，调用外部接口错误)
        * 通常记录日志
        * 不向客户返回具体信息
异常实例

>  错误码清单

| 错误码      | 含义           | 错误信息  |
| ---------- |-------------| -----|
| 999       | 未知错误 |  |
| 1         | 开头为通用错误      |    |
| 2         | 商品类错误      |     |
| 3         | 主题类错误      |     |
| 4         | Banner类错误      |     |
| 5         | 类目录错误      |     |
| 6         | 用户类错误      |     |
| 7         | 订单类错误      |     |
| 10000         | 通用参数错误      |     |
| 10001         | 资源未找到      |     |
| 10002         | 未授权(令牌不合法)      |     |
| 10003         | 尝试非法操作(自己令牌操作他人数据) |     |
| 10004         | 授权失败(第三方应用账号登录失败) |     |
| 10005         | 授权失败(服务器缓存异常)|     |
| 20000         | 请求商品不存在|     |
| 30000        | 请求主题不存在|     |
| 40000         | Banner不存在|     |
| 50000         | 类目不存在|     |
| 60000         | 用户不存在|     |
| 60001         | 用户地址不存在|     |
| 80000         | 订单不存在|     |
| 80001         | 订单中的商品不存在，可能已被删除|     |
| 80002         | 订单还未支付|     |
| 80003         | 订单已支付|     |

